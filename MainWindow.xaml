<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Windows SysAdmin Dashboard"
        Height="900" Width="1600" MinHeight="800" MinWidth="1200"
        WindowStartupLocation="CenterScreen" ResizeMode="CanResizeWithGrip"
        Background="#F6F8FA" FontFamily="Segoe UI" FontSize="14">
    <Window.Resources>
        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButton" TargetType="Button">
            <Setter Property="Height" Value="25"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#23272F"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="0,4,0,4"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter VerticalAlignment="Center" Margin="16,0,0,0"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E0E7EF"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#D1D5DB"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- Glass Card Button Style -->
        <Style x:Key="GlassCardButton" TargetType="Button">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#80FFFFFF" Offset="0"/>
                        <GradientStop Color="#40FFFFFF" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#80A5B4FC"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="18"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#FF2563EB"/>
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#CCFFFFFF" Offset="0"/>
                                <GradientStop Color="#80FFFFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="BorderBrush" Value="#FF4F46E5"/>
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#B3E0E7EF" Offset="0"/>
                                <GradientStop Color="#80E0E7EF" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- Card Style -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Background" Value="#FFF"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Padding" Value="24"/>
        </Style>
        <!-- Glass Card Border Style -->
        <Style x:Key="GlassCardBorder" TargetType="Border" BasedOn="{StaticResource CardStyle}">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#80FFFFFF" Offset="0"/>
                        <GradientStop Color="#40FFFFFF" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#80A5B4FC"/>
            <Setter Property="BorderThickness" Value="2"/>
        </Style>
        <!-- Software Data Grid Style -->
        <Style x:Key="SoftwareDataGridStyle" TargetType="DataGrid">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="RowBackground" Value="Transparent"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#E0E7EF"/>
            <Setter Property="VerticalGridLinesBrush" Value="#E0E7EF"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="ColumnHeaderHeight" Value="40"/>
            <Setter Property="RowHeight" Value="26"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="DataGrid.ColumnHeaderStyle">
                <Setter.Value>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="#23272F"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="FontSize" Value="15"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Padding" Value="12,0,12,0"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                        <Setter Property="Height" Value="40"/>
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter Property="DataGrid.RowStyle">
                <Setter.Value>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                        <Setter Property="FontSize" Value="15"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#D1D5DB"/>
                                <Setter Property="Foreground" Value="#23272F"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter Property="DataGrid.CellStyle">
                <Setter.Value>
                    <Style TargetType="DataGridCell">
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="BorderBrush" Value="Transparent"/>
                            </Trigger>
                            <Trigger Property="Validation.HasError" Value="True">
                                <Setter Property="BorderBrush" Value="Transparent"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Simple DataTemplate for server/computer list items -->
        <DataTemplate x:Key="ServerListItemTemplate">
            <Border Margin="4" Padding="8" Background="Transparent" CornerRadius="6" BorderBrush="#E5E7EB" BorderThickness="1">
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding Hostname}" FontWeight="Bold" FontSize="15" Margin="0,0,0,2"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="IP:" Foreground="#888" Margin="0,0,12,0"/>
                        <TextBlock Text="{Binding IPAddress}" FontFamily="Consolas" Margin="0,0,12,0"/>
                        <TextBlock Text="EC2:" Foreground="#888" Margin="0,0,12,0"/>
                        <TextBlock Text="{Binding EC2Status}" Margin="0,0,12,0"/>
                        <TextBlock Text="Ping:" Foreground="#888" Margin="0,0,12,0"/>
                        <Ellipse Width="12" Height="12" Fill="Green" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="36"/>
        </Grid.RowDefinitions>

        <!-- Sidebar -->
        <Border Grid.Row="0" Grid.Column="0" 
            Background="#F9FAFB" 
            CornerRadius="18" 
            Padding="5"
            Margin="0,24,0,0"
            BorderBrush="#E0E7EF"
            BorderThickness="1"
            VerticalAlignment="Top"
            HorizontalAlignment="Center">
            <StackPanel Width="150" HorizontalAlignment="Center">
                <!-- Dashboard -->
                <Button x:Name="btnNavDashboard" Style="{StaticResource SidebarButton}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Home Icon -->
                        <Viewbox Width="20" Height="20" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Canvas Width="20" Height="20">
                                <Path Data="M10,2 L18,8 V18 H13 V13 H7 V18 H2 V8 Z"
                                      Fill="#23272F"/>
                            </Canvas>
                        </Viewbox>
                        <TextBlock Text="Dashboard" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Servers -->
                <Button x:Name="btnNavServers" Style="{StaticResource SidebarButton}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Computer Icon -->
                        <Viewbox Width="20" Height="20" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Canvas Width="20" Height="20">
                                <Rectangle Width="16" Height="10" Canvas.Left="2" Canvas.Top="3" RadiusX="2" RadiusY="2" Fill="#23272F"/>
                                <Rectangle Width="12" Height="2" Canvas.Left="4" Canvas.Top="15" Fill="#23272F"/>
                            </Canvas>
                        </Viewbox>
                        <TextBlock Text="Servers" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Software -->
                <Button x:Name="btnNavSoftware" Style="{StaticResource SidebarButton}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Disk Icon -->
                        <Viewbox Width="20" Height="20" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Canvas Width="20" Height="20">
                                <Ellipse Width="16" Height="16" Canvas.Left="2" Canvas.Top="2" Stroke="#23272F" StrokeThickness="2"/>
                                <Ellipse Width="6" Height="6" Canvas.Left="7" Canvas.Top="7" Fill="#23272F"/>
                            </Canvas>
                        </Viewbox>
                        <TextBlock Text="Software" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Security -->
                <Button x:Name="btnNavSecurity" Style="{StaticResource SidebarButton}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Lock Icon -->
                        <Viewbox Width="20" Height="20" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Canvas Width="20" Height="20">
                                <Rectangle Width="12" Height="8" Canvas.Left="4" Canvas.Top="9" RadiusX="2" RadiusY="2" Fill="#23272F"/>
                                <Ellipse Width="8" Height="8" Canvas.Left="6" Canvas.Top="3" Stroke="#23272F" StrokeThickness="2"/>
                            </Canvas>
                        </Viewbox>
                        <TextBlock Text="Security" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Scripts -->
                <Button x:Name="btnNavScripts" Style="{StaticResource SidebarButton}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Script Icon (Document) -->
                        <Viewbox Width="20" Height="20" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Canvas Width="20" Height="20">
                                <Rectangle Width="12" Height="16" Canvas.Left="4" Canvas.Top="2" RadiusX="2" RadiusY="2" Stroke="#23272F" StrokeThickness="2" Fill="Transparent"/>
                                <Line X1="7" Y1="6" X2="13" Y2="6" Stroke="#23272F" StrokeThickness="1.5"/>
                                <Line X1="7" Y1="10" X2="13" Y2="10" Stroke="#23272F" StrokeThickness="1.5"/>
                                <Line X1="7" Y1="14" X2="11" Y2="14" Stroke="#23272F" StrokeThickness="1.5"/>
                            </Canvas>
                        </Viewbox>
                        <TextBlock Text="Scripts" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Scheduling -->
                <Button x:Name="btnNavScheduling" Style="{StaticResource SidebarButton}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Clock Icon -->
                        <Viewbox Width="20" Height="20" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Canvas Width="20" Height="20">
                                <Ellipse Width="16" Height="16" Canvas.Left="2" Canvas.Top="2" Stroke="#23272F" StrokeThickness="2"/>
                                <Line X1="10" Y1="10" X2="10" Y2="6" Stroke="#23272F" StrokeThickness="2"/>
                                <Line X1="10" Y1="10" X2="13" Y2="10" Stroke="#23272F" StrokeThickness="2"/>
                            </Canvas>
                        </Viewbox>
                        <TextBlock Text="Scheduling" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Alerts -->
                <Button x:Name="btnNavAlerts" Style="{StaticResource SidebarButton}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Alert Icon (Bell) -->
                        <Viewbox Width="20" Height="20" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Canvas Width="20" Height="20">
                                <Path Data="M10,3 C7,3 7,6 7,8 V12 L5,14 H15 L13,12 V8 C13,6 13,3 10,3 Z"
                                      Stroke="#23272F" StrokeThickness="1.5" Fill="Transparent"/>
                                <Ellipse Width="4" Height="2" Canvas.Left="8" Canvas.Top="15" Fill="#23272F"/>
                            </Canvas>
                        </Viewbox>
                        <TextBlock Text="Alerts" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Border>

        <!-- Main Content Panels -->
        <Grid Grid.Row="0" Grid.Column="1" x:Name="MainContentGrid" Background="#F6F8FA">
            <!-- Dashboard Panel -->
            <Grid x:Name="panelDashboard" Visibility="Visible" Background="#F6F8FA">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
            
                <!-- Dashboard Title -->
                <TextBlock Text="Server Health Dashboard" FontSize="32" FontWeight="Bold" Foreground="#23272F" Margin="24,24,0,12"/>
            
                <!-- Modern Summary Cards -->
                <UniformGrid Grid.Row="1" Rows="1" Columns="3" Margin="24,0,24,24">
                    <!-- Running -->
                    <Button x:Name="btnSummaryRunning" Style="{StaticResource GlassCardButton}">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,8">
                                <Ellipse Width="18" Height="18" Fill="#22C55E" VerticalAlignment="Center"/>
                                <TextBlock Text="Running" FontWeight="SemiBold" FontSize="18" Foreground="#23272F" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock x:Name="txtSummaryRunning" Text="N/A" FontSize="40" FontWeight="Bold" Foreground="#23272F" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                            <TextBlock Text="EC2 Instances" Foreground="#64748B" HorizontalAlignment="Center" FontSize="14"/>
                        </StackPanel>
                    </Button>
                    <!-- Stopped -->
                    <Button x:Name="btnSummaryStopped" Style="{StaticResource GlassCardButton}">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,8">
                                <Ellipse Width="18" Height="18" Fill="#64748B" VerticalAlignment="Center"/>
                                <TextBlock Text="Stopped" FontWeight="SemiBold" FontSize="18" Foreground="#23272F" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock x:Name="txtSummaryStopped" Text="N/A" FontSize="40" FontWeight="Bold" Foreground="#23272F" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                            <TextBlock Text="EC2 Instances" Foreground="#64748B" HorizontalAlignment="Center" FontSize="14"/>
                        </StackPanel>
                    </Button>
                    <!-- Impaired -->
                    <Button x:Name="btnSummaryImpaired" Style="{StaticResource GlassCardButton}">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,8">
                                <Ellipse Width="18" Height="18" Fill="#F59E42" VerticalAlignment="Center"/>
                                <TextBlock Text="Impaired" FontWeight="SemiBold" FontSize="18" Foreground="#23272F" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock x:Name="txtSummaryImpaired" Text="N/A" FontSize="40" FontWeight="Bold" Foreground="#23272F" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                            <TextBlock Text="EC2 Instances" Foreground="#64748B" HorizontalAlignment="Center" FontSize="14"/>
                        </StackPanel>
                    </Button>
                </UniformGrid>
            
                <!-- Top 10 Tables -->
                <Grid Grid.Row="2" Margin="24,0,24,24">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                
                    <!-- Disk Usage -->
                    <Border Height="400" Style="{StaticResource GlassCardBorder}" VerticalAlignment="Top" Margin="12" Grid.Column="0">
                        <StackPanel>
                            <TextBlock Text="Top 10 by Disk Usage" FontWeight="SemiBold" FontSize="18" Foreground="#23272F" Margin="0,0,0,8"/>
                            <DataGrid x:Name="dgTopDisk"
                                      AutoGenerateColumns="False"
                                      CanUserSortColumns="True"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="None"
                                      ColumnHeaderHeight="40"
                                      RowHeight="26"
                                      FontSize="15"
                                      Height="320"
                                      BorderThickness="0"
                                      SelectionMode="Single"
                                      IsReadOnly="True"
                                      Background="Transparent"
                                      RowBackground="Transparent"
                                      HorizontalGridLinesBrush="#E0E7EF"
                                      VerticalGridLinesBrush="#E0E7EF"
                                      SnapsToDevicePixels="True">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="#23272F"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="15"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Padding" Value="12,0,12,0"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                        <Setter Property="Height" Value="40"/>
                                    </Style>
                                    <Style TargetType="DataGridRow">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                                        <Setter Property="FontSize" Value="15"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#D1D5DB"/>
                                                <Setter Property="Foreground" Value="#23272F"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                    <Style TargetType="DataGridCell">
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                            </Trigger>
                                            <Trigger Property="Validation.HasError" Value="True">
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Hostname" Binding="{Binding Hostname}" Width="*" />
                                    <DataGridTextColumn Header="Disk Usage" Binding="{Binding Usage}" Width="*" />
                                    <DataGridTemplateColumn Header="Status" Width="Auto">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Ellipse Width="16" Height="16" Fill="{Binding StatusColor}" ToolTip="{Binding Status}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Border>
                
                    <!-- CPU Usage -->
                    <Border Height="400" Style="{StaticResource GlassCardBorder}" VerticalAlignment="Top" Margin="12" Grid.Column="1">
                        <StackPanel>
                            <TextBlock Text="Top 10 by CPU Usage" FontWeight="SemiBold" FontSize="18" Foreground="#23272F" Margin="0,0,0,8"/>
                            <DataGrid x:Name="dgTopCPU"
                                      AutoGenerateColumns="False"
                                      CanUserSortColumns="True"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="None"
                                      ColumnHeaderHeight="40"
                                      RowHeight="26"
                                      FontSize="15"
                                      Height="320"
                                      BorderThickness="0"
                                      SelectionMode="Single"
                                      IsReadOnly="True"
                                      Background="Transparent"
                                      RowBackground="Transparent"
                                      HorizontalGridLinesBrush="#E0E7EF"
                                      VerticalGridLinesBrush="#E0E7EF"
                                      SnapsToDevicePixels="True">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="#23272F"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="15"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Padding" Value="12,0,12,0"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                        <Setter Property="Height" Value="40"/>
                                    </Style>
                                    <Style TargetType="DataGridRow">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                                        <Setter Property="FontSize" Value="15"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#D1D5DB"/>
                                                <Setter Property="Foreground" Value="#23272F"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                    <Style TargetType="DataGridCell">
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                            </Trigger>
                                            <Trigger Property="Validation.HasError" Value="True">
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Hostname" Binding="{Binding Hostname}" Width="*" />
                                    <DataGridTextColumn Header="CPU Usage" Binding="{Binding Usage}" Width="*" />
                                    <DataGridTemplateColumn Header="Status" Width="Auto">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Ellipse Width="16" Height="16" Fill="{Binding StatusColor}" ToolTip="{Binding Status}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Border>
                
                    <!-- Memory Usage -->
                    <Border Height="400" Style="{StaticResource GlassCardBorder}" VerticalAlignment="Top" Margin="12" Grid.Column="2">
                        <StackPanel>
                            <TextBlock Text="Top 10 by Memory Usage" FontWeight="SemiBold" FontSize="18" Foreground="#23272F" Margin="0,0,0,8"/>
                            <DataGrid x:Name="dgTopMemory"
                                      AutoGenerateColumns="False"
                                      CanUserSortColumns="True"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="None"
                                      ColumnHeaderHeight="40"
                                      RowHeight="26"
                                      FontSize="15"
                                      Height="320"
                                      BorderThickness="0"
                                      SelectionMode="Single"
                                      IsReadOnly="True"
                                      Background="Transparent"
                                      RowBackground="Transparent"
                                      HorizontalGridLinesBrush="#E0E7EF"
                                      VerticalGridLinesBrush="#E0E7EF"
                                      SnapsToDevicePixels="True">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="#23272F"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="15"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Padding" Value="12,0,12,0"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                        <Setter Property="Height" Value="40"/>
                                    </Style>
                                    <Style TargetType="DataGridRow">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                                        <Setter Property="FontSize" Value="15"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#D1D5DB"/>
                                                <Setter Property="Foreground" Value="#23272F"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                    <Style TargetType="DataGridCell">
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                            </Trigger>
                                            <Trigger Property="Validation.HasError" Value="True">
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Hostname" Binding="{Binding Hostname}" Width="*" />
                                    <DataGridTextColumn Header="Memory Usage" Binding="{Binding Usage}" Width="*" />
                                    <DataGridTemplateColumn Header="Status" Width="Auto">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Ellipse Width="16" Height="16" Fill="{Binding StatusColor}" ToolTip="{Binding Status}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>

            <!-- Servers Panel -->
            <Grid x:Name="panelServers" Visibility="Collapsed" Background="#F6F8FA">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <!-- Header and Search/Actions -->
                <StackPanel Orientation="Horizontal" Margin="24,24,0,12">
                    <TextBlock Text="Servers" FontSize="28" FontWeight="Bold" Foreground="#23272F"/>
                    <TextBox x:Name="txtServerSearch" Width="220" Height="36" Margin="32,0,0,0" VerticalAlignment="Center" VerticalContentAlignment="Center" FontSize="14" Padding="8,4" Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1" ToolTip="Search servers..."/>
                    
                    <!-- Filter Flyout Button -->
                    <Grid Margin="16,0,0,0" VerticalAlignment="Center">
                        <Button x:Name="btnFilterFlyout" Content="Filters ⏷" Height="32" Padding="16,0"
                                Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1"/>
                        <Popup x:Name="popupFilters" Placement="Bottom" PlacementTarget="{Binding ElementName=btnFilterFlyout}" StaysOpen="False" AllowsTransparency="True">
                            <Border Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1" CornerRadius="8" Padding="8">
                                <StackPanel>
                                    <Button Content="All" x:Name="btnFilterAll" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button Content="Online" x:Name="btnFilterOnline" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button Content="Offline" x:Name="btnFilterOffline" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button Content="Impaired" x:Name="btnFilterImpaired" Height="32" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                </StackPanel>
                            </Border>
                        </Popup>
                    </Grid>

                    <!-- Actions Flyout Button -->
                    <Grid Margin="16,0,0,0" VerticalAlignment="Center">
                        <Button x:Name="btnActionsFlyout" Content="Actions ⏷" Height="32" Padding="16,0"
                                Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1"/>
                        <Popup x:Name="popupActions" Placement="Bottom" PlacementTarget="{Binding ElementName=btnActionsFlyout}" StaysOpen="False" AllowsTransparency="True">
                            <Border Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1" CornerRadius="8" Padding="8">
                                <StackPanel>
                                    <Button x:Name="btnActionReboot" Content="Reboot Server(s)" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button x:Name="btnActionDeploy" Content="Deploy Software to Server(s)" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button x:Name="btnActionScript" Content="Execute Script on Server(s)" Height="32" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                </StackPanel>
                            </Border>
                        </Popup>
                    </Grid>

                    <Button x:Name="btnExportServers"
                            Content="Export"
                            Height="32"
                            Padding="16,0"
                            Margin="16,0,0,0"
                            Background="#E0E7EF"
                            Foreground="#23272F"
                            BorderBrush="#E0E7EF"
                            BorderThickness="1"/>
                </StackPanel>

                <!-- DataGrid -->
                <Border CornerRadius="14,14,14,14" Background="#FFF" Margin="24,0,24,10" BorderBrush="#E0E7EF" BorderThickness="1" Grid.Row="2" ClipToBounds="True" Padding="2">
                    <Grid>
                        <!-- Custom header background with rounded top corners -->
                        <Border Background="#F6F8FA" CornerRadius="12,12,0,0" Height="40" VerticalAlignment="Top" Margin="0,0,0,0" IsHitTestVisible="False"/>
                        <DataGrid x:Name="dgServers"
                                  MinHeight="720"
                                  MaxHeight="1200"
                                  Height="Auto"
                                  AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="False"
                                  SelectionMode="Extended" Background="Transparent" BorderThickness="0"
                                  RowBackground="Transparent" HeadersVisibility="Column" GridLinesVisibility="None"
                                  ColumnHeaderHeight="40" RowHeight="26" FontSize="15"
                                  HorizontalGridLinesBrush="#E0E7EF" VerticalGridLinesBrush="#E0E7EF"
                                  SnapsToDevicePixels="True"
                                  RowHeaderWidth="40"
                                  ScrollViewer.CanContentScroll="True"
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                  ScrollViewer.VerticalScrollBarVisibility="Auto">
                            <DataGrid.Resources>
                                <!-- Modern header style with transparent background and no bottom border -->
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="#23272F"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="FontSize" Value="15"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Padding" Value="12,0,12,0"/>
                                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                    <Setter Property="Height" Value="40"/>
                                </Style>
                                <!-- Modern row style with vertical centering -->
                                <Style TargetType="DataGridRow">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="SnapsToDevicePixels" Value="True"/>
                                    <Setter Property="FontSize" Value="15"/>
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                    <Style.Triggers>
                                        <!-- Highlight the entire row when selected -->
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="#D1D5DB"/>
                                            <Setter Property="Foreground" Value="#23272F"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                        </Trigger>
                                        <Trigger Property="Validation.HasError" Value="True">
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.Resources>
                            <DataGrid.Columns>
                                <DataGridCheckBoxColumn Header="" Width="40"
                                    Binding="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, TargetNullValue=False, FallbackValue=False}"
                                    IsThreeState="False">
                                    <DataGridCheckBoxColumn.ElementStyle>
                                        <Style TargetType="CheckBox">
                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                            <Setter Property="BorderBrush" Value="#A5B4FC"/>
                                            <Setter Property="BorderThickness" Value="1"/>
                                            <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
                                            <Setter Property="IsChecked" Value="False"/>
                                            <Style.Triggers>
                                                <!-- Prevent red border on click/focus -->
                                                <Trigger Property="IsKeyboardFocused" Value="True">
                                                    <Setter Property="BorderBrush" Value="#2563EB"/>
                                                </Trigger>
                                                <Trigger Property="IsFocused" Value="True">
                                                    <Setter Property="BorderBrush" Value="#2563EB"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </DataGridCheckBoxColumn.ElementStyle>
                                    <DataGridCheckBoxColumn.EditingElementStyle>
                                        <Style TargetType="CheckBox">
                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                            <Setter Property="BorderBrush" Value="#A5B4FC"/>
                                            <Setter Property="BorderThickness" Value="1"/>
                                            <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
                                            <Setter Property="IsChecked" Value="False"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsKeyboardFocused" Value="True">
                                                    <Setter Property="BorderBrush" Value="#2563EB"/>
                                                </Trigger>
                                                <Trigger Property="IsFocused" Value="True">
                                                    <Setter Property="BorderBrush" Value="#2563EB"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </DataGridCheckBoxColumn.EditingElementStyle>
                                </DataGridCheckBoxColumn>
                                <DataGridTextColumn Header="Hostname" Binding="{Binding Hostname}" Width="*"/>
                                <DataGridTextColumn Header="IP" Binding="{Binding IPAddress}" Width="*"/>
                                <DataGridTextColumn Header="EC2 Instance ID" Binding="{Binding EC2InstanceId}" Width="*"/>
                                <DataGridTextColumn Header="EC2 Status" Binding="{Binding EC2Status}" Width="*"/>
                                <DataGridTextColumn Header="CPU Usage" Binding="{Binding CPUUsage}" Width="*"/>
                                <DataGridTextColumn Header="Memory Usage" Binding="{Binding MemoryUsage}" Width="*"/>
                                <DataGridTextColumn Header="OS" Binding="{Binding OS}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Border>

                <!-- Pagination and Actions (Bottom) -->
                <StackPanel Orientation="Horizontal" Grid.Row="3" HorizontalAlignment="Right" Margin="0,0,32,16" VerticalAlignment="Center">
                    <Button x:Name="btnPrevPage" Content="◀" Width="36" Height="36" Background="#E0E7EF" BorderBrush="#E0E7EF" Foreground="#23272F" Padding="0"
                            Style="{x:Null}">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="18">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#D1D5DB"/>
                                        <Setter TargetName="border" Property="BorderBrush" Value="#2563EB"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#A5B4FC"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <TextBlock x:Name="txtPageInfo" Text="1 / 5" VerticalAlignment="Center" FontWeight="SemiBold" Margin="5,0,5,0"/>
                    <Button x:Name="btnNextPage" Content="▶" Width="36" Height="36" Background="#E0E7EF" BorderBrush="#E0E7EF" Foreground="#23272F" Padding="0"
                            Style="{x:Null}">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="18">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#D1D5DB"/>
                                        <Setter TargetName="border" Property="BorderBrush" Value="#2563EB"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#A5B4FC"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <!-- Rows Per Page Flyout -->
                    <Grid Margin="8,0,0,0" VerticalAlignment="Center">
                        <Button x:Name="btnRowsPerPageFlyout" Content="Rows: 25 ⏷" Height="32" Padding="16,0"
                                Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1"/>
                        <Popup x:Name="popupRowsPerPage" Placement="Bottom" PlacementTarget="{Binding ElementName=btnRowsPerPageFlyout}" StaysOpen="False" AllowsTransparency="True">
                            <Border Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1" CornerRadius="8" Padding="8">
                                <StackPanel>
                                    <Button x:Name="btnRows10" Content="10" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button x:Name="btnRows25" Content="25" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button x:Name="btnRows50" Content="50" Height="32" Margin="0,0,0,6" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                    <Button x:Name="btnRows100" Content="100" Height="32" Padding="16,0"
                                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                </StackPanel>
                            </Border>
                        </Popup>
                    </Grid>
                </StackPanel>
            </Grid>

            <!-- Software Management Panel -->
            <Grid x:Name="panelSoftware" Visibility="Collapsed" Background="#F6F8FA">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <!-- Header and Search/Filters/Actions -->
                <StackPanel Orientation="Horizontal" Margin="24,24,0,12">
                    <TextBlock Text="Software Management" FontSize="28" FontWeight="Bold" Foreground="#23272F"/>
                    <TextBox x:Name="txtSoftwareSearch" Width="220" Height="36" Margin="32,0,0,0" VerticalAlignment="Center" VerticalContentAlignment="Center" FontSize="14" Padding="8,4" Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1" ToolTip="Search software or server..."/>
                    <ComboBox x:Name="cbSoftwareStatusFilter" Width="160" Height="36" Margin="16,0,0,0" VerticalAlignment="Center" FontSize="14">
                        <ComboBoxItem Content="All"/>
                        <ComboBoxItem Content="Up to date"/>
                        <ComboBoxItem Content="Update available"/>
                    </ComboBox>
                    <Button x:Name="btnSoftwareActionsFlyout" Content="Actions ⏷" Height="32" Padding="16,0" Margin="16,0,0,0"
                            Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1"/>
                    <Popup x:Name="popupSoftwareActions" Placement="Bottom" PlacementTarget="{Binding ElementName=btnSoftwareActionsFlyout}" StaysOpen="False" AllowsTransparency="True">
                        <Border Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1" CornerRadius="8" Padding="8">
                            <StackPanel>
                                <Button x:Name="btnDeploySoftware" Content="Deploy Software" Height="32" Margin="0,0,0,6" Padding="16,0"
                                        Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                                <Button x:Name="btnRemoveSoftware" Content="Remove Software" Height="32" Padding="16,0"
                                        Background="#E0E7EF" Foreground="#23272F" BorderBrush="#E0E7EF" BorderThickness="1" />
                            </StackPanel>
                        </Border>
                    </Popup>
                    <Button x:Name="btnExportSoftware"
                            Content="Export"
                            Height="32"
                            Padding="16,0"
                            Margin="16,0,0,0"
                            Background="#E0E7EF"
                            Foreground="#23272F"
                            BorderBrush="#E0E7EF"
                            BorderThickness="1"/>
                </StackPanel>

                <!-- DataGrid: Popular Software Overview -->
                <Border CornerRadius="14" Background="#FFF" Margin="24,0,24,10" BorderBrush="#E0E7EF" BorderThickness="1" Grid.Row="2" ClipToBounds="True" Padding="2">
                    <Grid>
                        <Border Background="#F6F8FA" CornerRadius="12,12,0,0" Height="40" VerticalAlignment="Top" Margin="0,0,0,0" IsHitTestVisible="False"/>
                        <DataGrid x:Name="dgSoftware"
                            Style="{StaticResource SoftwareDataGridStyle}"
                            MinHeight="400"
                            MaxHeight="1200"
                            Height="Auto"
                            AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True"
                            SelectionMode="Single" BorderThickness="0"
                            ScrollViewer.CanContentScroll="True"
                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                            ScrollViewer.VerticalScrollBarVisibility="Auto">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Software" Binding="{Binding Name}" Width="2*" />
                                <DataGridTextColumn Header="Latest Version" Binding="{Binding LatestVersion}" Width="*" />
                                <DataGridTextColumn Header="# Needing Update" Binding="{Binding UpdateCount}" Width="*" />
                                <DataGridTextColumn Header="Total Installed" Binding="{Binding TotalInstalled}" Width="*" />
                                <DataGridTemplateColumn Header="Status" Width="100">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Ellipse Width="16" Height="16" Fill="{Binding StatusColor}" ToolTip="{Binding Status}" Margin="0,0,4,0"/>
                                                <TextBlock Text="{Binding Status}" Foreground="#23272F" FontWeight="SemiBold"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Actions" Width="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button x:Name="btnRowUpdate" Content="Update" Padding="8,0" Margin="0,0,4,0" Height="24" MinWidth="60"
                                                        Command="{Binding DataContext.UpdateSingleCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                        CommandParameter="{Binding}" 
                                                        Background="#4F46E5" Foreground="White" BorderThickness="0"/>
                                                <Button x:Name="btnRowDetails" Content="Details" Padding="8,0" Height="24" MinWidth="60"
                                                        Command="{Binding DataContext.ShowDetailsCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                        CommandParameter="{Binding}" 
                                                        Background="#E0E7EF" Foreground="#23272F" BorderThickness="0"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Border>

                <!-- Bulk Update and Progress -->
                <StackPanel Orientation="Horizontal" Grid.Row="3" HorizontalAlignment="Right" Margin="0,0,32,16" VerticalAlignment="Center">
                    <Button x:Name="btnUpdateAllSoftware" Content="Update All Outdated" Background="#F59E42" Foreground="#FFF" Height="32" Padding="16,0" Margin="0,0,8,0"/>
                    <ProgressBar x:Name="pbSoftwareUpdateProgress" Width="200" Height="18" Margin="0,0,0,0" Minimum="0" Maximum="100" Value="0" Visibility="Collapsed"/>
                </StackPanel>

                <!-- Detailed View Flyout/Dialog -->
                <Border x:Name="borderSoftwareDetail" Visibility="Collapsed" Style="{StaticResource GlassCardBorder}" Margin="24" Padding="24" Grid.RowSpan="4" HorizontalAlignment="Center" VerticalAlignment="Center" Width="480">
                    <StackPanel>
                        <TextBlock x:Name="txtDetailSoftwareName" FontSize="22" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock x:Name="txtDetailLatestVersion" FontSize="16" Margin="0,0,0,8"/>
                        <TextBlock x:Name="txtDetailTotalInstalled" FontSize="16" Margin="0,0,0,8"/>
                        <TextBlock x:Name="txtDetailUpdateCount" FontSize="16" Margin="0,0,0,8"/>
                        <TextBlock Text="Installed On:" FontWeight="SemiBold" FontSize="16" Margin="0,12,0,4"/>
                        <DataGrid x:Name="dgDetailInstalledOn" AutoGenerateColumns="False" HeadersVisibility="Column" Height="120" IsReadOnly="True" SelectionMode="Single">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Server" Binding="{Binding Server}" Width="*" />
                                <DataGridTextColumn Header="Version" Binding="{Binding Version}" Width="*" />
                                <DataGridTextColumn Header="Last Updated" Binding="{Binding LastUpdated}" Width="*" />
                                <DataGridTextColumn Header="Update History" Binding="{Binding UpdateHistory}" Width="2*" />
                            </DataGrid.Columns>
                        </DataGrid>
                        <Button x:Name="btnCloseSoftwareDetail" Content="Close" Width="80" Margin="0,16,0,0" HorizontalAlignment="Right"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Security Panel -->
            <Grid x:Name="panelSecurity" Visibility="Collapsed" Background="#F6F8FA">
                <StackPanel Margin="24">
                    <TextBlock Text="Security Overview" FontSize="28" FontWeight="Bold" Foreground="#23272F" Margin="0,0,0,16"/>
                    <DataGrid x:Name="dgSecurity" AutoGenerateColumns="False" Height="400" Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1"
                              RowBackground="#F8FAFC" HeadersVisibility="Column" GridLinesVisibility="None"
                              ColumnHeaderHeight="36" RowHeight="32" FontSize="14">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Hostname" Binding="{Binding Hostname}" Width="*"/>
                            <DataGridTextColumn Header="Defender" Binding="{Binding DefenderStatus}" Width="*"/>
                            <DataGridTextColumn Header="Trellix ENS" Binding="{Binding TrellixENSStatus}" Width="*"/>
                            <DataGridTextColumn Header="Trellix Solidcore" Binding="{Binding TrellixSolidcoreStatus}" Width="*"/>
                            <DataGridTextColumn Header="Forescout" Binding="{Binding ForescoutStatus}" Width="*"/>
                            <DataGridTextColumn Header="Splunk" Binding="{Binding SplunkStatus}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Grid>

            <!-- Scripts Panel -->
            <Grid x:Name="panelScripts" Visibility="Collapsed" Background="#F6F8FA">
                <StackPanel Margin="24">
                    <TextBlock Text="Script Library" FontSize="28" FontWeight="Bold" Foreground="#23272F" Margin="0,0,0,16"/>
                    <TextBlock Text="Select a script to deploy to servers or groups." Margin="0,0,0,8"/>
                    <ListBox x:Name="lbScripts" Height="200" Margin="0,0,0,16"/>
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="btnRunScript" Content="Run Script" Background="#4F46E5" Foreground="#FFF" Margin="0,0,8,0"/>
                        <Button x:Name="btnUploadScript" Content="Upload Script" Background="#7B5CD6" Foreground="#FFF"/>
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!-- Scheduling Panel -->
            <Grid x:Name="panelScheduling" Visibility="Collapsed" Background="#F6F8FA">
                <StackPanel Margin="24">
                    <TextBlock Text="Scheduling" FontSize="28" FontWeight="Bold" Foreground="#23272F" Margin="0,0,0,16"/>
                    <DataGrid x:Name="dgScheduling" AutoGenerateColumns="False" Height="400" Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1"
                              RowBackground="#F8FAFC" HeadersVisibility="Column" GridLinesVisibility="None"
                              ColumnHeaderHeight="36" RowHeight="32" FontSize="14">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Task" Binding="{Binding Task}" Width="*"/>
                            <DataGridTextColumn Header="Target" Binding="{Binding Target}" Width="*"/>
                            <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="*"/>
                            <DataGridTextColumn Header="Scheduled Time" Binding="{Binding ScheduledTime}" Width="*"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                        <Button x:Name="btnAddSchedule" Content="Add Schedule" Background="#4F46E5" Foreground="#FFF" Margin="0,0,8,0"/>
                        <Button x:Name="btnRemoveSchedule" Content="Remove Schedule" Background="#EF4444" Foreground="#FFF"/>
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!-- Alerts Panel -->
            <Grid x:Name="panelAlerts" Visibility="Collapsed" Background="#F6F8FA">
                <StackPanel Margin="24">
                    <TextBlock Text="Alerts" FontSize="28" FontWeight="Bold" Foreground="#23272F" Margin="0,0,0,16"/>
                    <DataGrid x:Name="dgAlerts" AutoGenerateColumns="False" Height="400" Background="#FFF" BorderBrush="#E0E7EF" BorderThickness="1"
                              RowBackground="#F8FAFC" HeadersVisibility="Column" GridLinesVisibility="None"
                              ColumnHeaderHeight="36" RowHeight="32" FontSize="14">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Alert Name" Binding="{Binding Name}" Width="*"/>
                            <DataGridTextColumn Header="Trigger" Binding="{Binding Trigger}" Width="*"/>
                            <DataGridTextColumn Header="Target" Binding="{Binding Target}" Width="*"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="*"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                        <Button x:Name="btnAddAlert" Content="Add Alert" Background="#4F46E5" Foreground="#FFF" Margin="0,0,8,0"/>
                        <Button x:Name="btnRemoveAlert" Content="Remove Alert" Background="#EF4444" Foreground="#FFF"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="1" Grid.ColumnSpan="2" Background="#E5E7EB" Height="36">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,24,0">
                <TextBlock x:Name="txtStatusBar" Text="Ready" Foreground="#23272F" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Add this inside the root <Grid> of your MainWindow.xaml, as the last child so it overlays all panels -->
        <Border x:Name="loadingOverlay"
                Background="#80000000"
                Visibility="Collapsed"
                Grid.RowSpan="2" Grid.ColumnSpan="2"
                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                Panel.ZIndex="9999">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <Border CornerRadius="16" Background="#FFF" Padding="32" Opacity="0.97">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="Loading data from AWS..." FontSize="22" FontWeight="Bold" Foreground="#23272F" Margin="0,0,0,16" HorizontalAlignment="Center"/>
                        <ProgressBar IsIndeterminate="True" Width="240" Height="18"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
    </Grid>
</Window>